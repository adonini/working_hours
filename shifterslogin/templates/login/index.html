{% extends 'login/base.html' %}
{% load crispy_forms_tags %}

{% block content %}
<div>
	<div class="row">
		<div class="col-sm-11 col-md-5 mx-auto mt-5 px-3 text-center">
			{% if user.is_authenticated %}
				<h1 class="fw-light">LST Shifters</h1>
				<p class="fw-light">Manage your woking times starting and finishing it once you end your shift.</p>
			{% else %}
				<div>
					<h1 class="fw-light">LST Shifters</h1>
					<br/>
					<a href="{% url 'login' %}" class="btn btn-primary">Log In To Get Started!</a>
				</div>
			{% endif %}
		</div>
	</div>
	<div class="row">
		<a class="btn btn-success btn-font col-3 text-decoration-none p-5 text-dark font-weight-bold d-flex justify-content-center rounded shadow" href="#" id="create-shift-btn">Start Shift</a>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function(){
        $("#create-shift-btn").click(function(event){
            event.preventDefault();
            $.ajax({
                url: "{% url 'create_shift' %}",
                type: "POST",
                data: {
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function(data) {
                    alert("Shift created: " + data.start_time + " - " + data.end_time);
                }
            });
        });
    });
</script>
{% endblock content %}